(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{406:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(408),r=n.n(a);n(415);function i(e,t,n,a,r,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function s(e){i(o,a,r,s,c,"next",e)}function c(e){i(o,a,r,s,c,"throw",e)}s(void 0)})}}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(e,null,[{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.a.isVisible()&&r.a.close(),e instanceof Error&&(t.message=e.message,e="error");var n=this.parseDataToOptions(t);switch(e){case"alert":return this.showAlert(t);case"custom":return this.showCustom(t);case"error":return this.showError(n);default:console.warn("Unknown alert type",e)}return!1}},{key:"close",value:function(){r.a.close()}},{key:"vibrate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[100,100];window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(e)}},{key:"parseDataToOptions",value:function(e){var t=e;return e.message&&(t.text=e.message),e.restart&&(t.onClose=function(){return window.location.reload(!0)}),t}},{key:"showAlert",value:function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.customClass="jbgModal",t.title=t.title||"Error",e.abrupt("return",r.a.fire(t));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"showError",value:function(){var e=o(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(185).then(n.t.bind(null,417,7));case 2:return a=e.sent,t.customClass="jbgModal",t.title=t.title||"Error",t.imageUrl=a.default,e.abrupt("return",r.a.fire(t));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"showCustom",value:function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.a.fire(t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"DismissReason",get:function(){return r.a.DismissReason}}]),e}()},409:function(e,t,n){"use strict";var a=n(12),r=n.n(a),i=n(28),o=n.n(i),s=n(34),c=n.n(s),u=n(31),l=n.n(u),h=n(160),p=n(411),f=n.n(p),d=l.a.View.extend({template:o.a.template(f.a),state:"off",model:new c.a.Model({imgHeight:180,background:"#000"}),events:{"click #slide-in-banner":"onBannerClick"},bindings:{"#slide-in-banner":{attributes:[{name:"style",observe:["background","imgHeight","color"],onGet:function(e){var t="";return e[0]&&(t+="background: ".concat(e[0],";")),e[1]&&(t+="max-height: ".concat(e[1],";")),e[2]&&(t+="color: ".concat(e[2],";")),t+="cursor:pointer;"}}]},"#slide-in-banner-img":{attributes:[{name:"style",observe:"imgHeight",onGet:function(e){return"margin: 0 auto; max-height: ".concat(e,"px;")}},{name:"src",observe:"imgSrc"}]},"#slide-in-banner-html":{observe:"html",updateMethod:"html"}},initialize:function(e){this.mergeOptions(e,["appId","banner"]),this.model.set(this.getOption("banner")),this.render()},onBannerClick:function(){h.analytics.trackEvent("SlideBanner","SlideBannerClicked",this.model.get("campaign"),0),window.open(this.model.get("imgLink"),"_blank")},onRender:function(){this.stickit()},show:function(){"off"===this.state&&(h.analytics.trackEvent("SlideBanner","SlideBannerOn",this.model.get("campaign"),0),r()("#slide-in-banner").slideToggle("fast",this.toggleDone),this.state="on")},hide:function(){"on"===this.state&&(r()("#slide-in-banner").slideToggle("fast",this.toggleDone),this.state="off")},toggleDone:function(){r()(window).trigger("resize")}});function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return v});var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&g(e.prototype,t),n&&g(e,n)}(e,null,[{key:"update",value:function(e,t){t&&"PostGame"===t.lobbyState?(this.view||this.init(e,t),this.show()):this.hide()}},{key:"init",value:function(e){if(-1===["quiplash2-international","Drawful2International"].indexOf(e)){var t="jbgtvpost".concat(e.replace(" ","")),n="https://jackboxgames.com/party-pack-six/?utm_source=jacboxtv&utm_campaign=".concat(t,"&utm_content=").concat(t),a="Play New Games in Party Pack 6 Now!";-1!==["TriviaDeath2","Jokeboat","Push The Button","Ridictionary","RoleModels"].indexOf(e)&&(t="jbgtvpost".concat(e.replace(" ","")),n="https://jackboxgames.com/party-pack-five/?utm_source=jacboxtv&utm_campaign=".concat(t,"&utm_content=").concat(t),a="Like This Game? Try Party Pack 5!"),a+='<div style="display:inline-block;color:black;background-color:white;border-radius:6px;padding:0px 10px;margin:5px;">BUY</div>',this.view=new d({el:"#banner",banner:{imgLink:n,campaign:t,background:"#000",color:"#fff",imgHeight:"100",html:a}}),this.isInitialized=!0}}},{key:"show",value:function(){this.view&&this.view.show("on")}},{key:"hide",value:function(){this.view&&this.view.hide("off")}},{key:"isVisible",get:function(){return!!this.view&&"on"===this.view.state}}]),e}();m(v,"view",null),m(v,"isInitialized",!1)},410:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(28),r=n.n(a),i=n(12),o=n.n(i),s=(n(34),n(31)),c=n.n(s),u=n(160),l=n(406),h=n(409),p=n(412),f=n(53),d=(n(419),n(420),n(413),c.a.View.extend({appName:"Controller",appId:"controller",appVersion:"3.0.4",model:null,template:null,debug:new p.a,render:function(){this.model.set("username",f.a.safeText(u.app.client.userName),{silent:!0}),this.$el.html(this.template(this.model.toJSON())),this.onResizeWithContext=this.onResize.bind(this),window.addEventListener("resize",this.onResizeWithContext),this.model.on("change",this.controllerUpdate,this),this.controllerUpdate(),u.app.client.on("client:roomWasDestroyed",this.onRoomWasDestroyed),u.app.client.on("client:disconnected",this.onDisconnected)},controllerUpdate:function(){console.log("[LegacyMainView] controllerUpdate");var e=this.model.get("roomBlob")||{},t=this.model.get("customerBlob"),n=e.state||"",a=e.lobbyState;this.debug.pushState({customerBlob:t,roomBlob:e}),a||-1===n.indexOf("_")||(a=e.state.split("_")[1]),"PostGame"===a||"Credits"===n||"GameOver"===n||"PostGame"===n||"DayEnd"===n||e.gameResults?(h.a.isInitialized||h.a.init(this.appId),h.a.show()):h.a.hide(),u.app.storage&&u.app.storage.isSupported&&e.platformId&&u.app.storage.setTag("platform-".concat(e.platformId))},update:function(){return console.log("[LegacyMainView] update"),null},onAttach:function(){console.log("[LegacyMainView] onAttach"),this.update(),o()(".gallery-link").click(this.artifactClicked)},artifactClicked:function(){u.app.analytics.trackEvent("PostGame","galleryClicked",this.appName)},showScreen:function(e,t){console.log("[LegacyMainView] showScreen",e,t,this.activeScreen);var n=o()(e);return(!this.activeScreen||e!==this.activeScreen)&&(this.activeScreen&&(o()(this.activeScreen).fadeOut("fast",function(){}),o()(this.activeScreen).show(),o()(this.activeScreen).addClass("pt-page-off")),n.hide(),n.removeClass("pt-page-off"),n.removeClass("pt-page-moveToLeft"),n.fadeIn("fast",function(){t&&t()}),this.activeScreen=e,this.onResize(),this.throttledTrackScreenView||(this.throttledTrackScreenView=r.a.throttle(this.trackScreenView.bind(this),48e4)),this.throttledTrackScreenView(this.appName),!1)},notify:function(){l.a.vibrate()},trackScreenView:function(){u.app.analytics.trackScreenView(this.appName),u.app.storage&&u.app.storage.isSupported&&u.app.storage.setTag("played-".concat(this.appName))},onRoomWasDestroyed:function(){u.app.storage&&u.app.storage.isSupported&&u.app.storage.remove("roomCode"),l.a.show("error",{title:"Disconnected",message:"Thanks for playing!",restart:!0})},onDisconnected:function(){l.a.show("error",{title:"Disconnected",message:"You have been disconnected.",restart:!1})},onResize:function(){console.log("[LegacyMainView] onResize");var e=o()("#player").outerHeight(!0),t=h.a.isVisible?o()("#slide-in-banner").outerHeight(!0):0,n=o()(window).width(),a=o()(window).height()-e;o()(".".concat(this.appTag,"-page")).css("height",a-t),o()(".".concat(this.appTag,"-page")).attr("height",a-t),o()(".".concat(this.appTag,"-page")).css("top",e),o()(".".concat(this.appTag,"-page")).css("width",n),o()(".".concat(this.appTag,"-page")).attr("width",n)}}))},411:function(e,t){e.exports='<div id="slide-in-banner" class="slide-in-banner">\n    <img id="slide-in-banner-img" class="img-responsive">\n    <div id="slide-in-banner-html" class="slide-in-banner-html"></div>\n</div>'},412:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var a=n(28),r=n.n(a),i=n(418),o=n.n(i),s=n(406),c=n(18),u=n(160);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(e,t,n,a,r,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,r)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function o(e){h(i,a,r,o,s,"next",e)}function s(e){h(i,a,r,o,s,"throw",e)}o(void 0)})}}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"states",[]),d(this,"errors",[]),d(this,"prodStateCount",20),d(this,"konami",void 0),d(this,"onKonami",p(regeneratorRuntime.mark(function e(){var n,a,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.createStates(),console.warn("[Debug] onKonami",n),e.next=4,s.a.show("alert",{input:"text",title:"What happened?",text:"Send debug data",showCancelButton:!0,allowOutsideClick:!1});case 4:if(!(a=e.sent).dismiss){e.next=7;break}return e.abrupt("return");case 7:r="".concat(t.states.length," ").concat(1===t.states.length?"state":"states"),i="".concat(u.app.client.appTag," ").concat(t.playerName," - ").concat(a.value," (").concat(r,")"),t.pushToSlack(i,n,"slackDebugUrl");case 10:case"end":return e.stop()}},e)}))),this.konami=new o.a(this.onKonami)}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(e,[{key:"pushState",value:function(e){if(this.states.length){var t=this.states[this.states.length-1];if(r.a.isEqual(t,e))return}var n=JSON.parse(JSON.stringify(e));this.states.push(n),!c.a.debug&&this.states.length>this.prodStateCount&&(this.states=this.states.splice(this.states.length-this.prodStateCount))}},{key:"pushError",value:function(e){this.errors.push(e.stack)}},{key:"createStates",value:function(){for(var e={},t=0;t<this.states.length;t++){var n=l(this.createState(t,this.states[t]),2),a=n[0],r=n[1];e[a]=r}return{states:e,appId:u.app.client.appId,appTag:u.app.client.appTag}}},{key:"createState",value:function(e,t){var n="unknown";return t.roomBlob&&(n=t.roomBlob.audience&&t.roomBlob.audience.state?t.roomBlob.audience.state:t.roomBlob.state),t.customerBlob&&t.customerBlob.state&&(n=t.customerBlob.state,this.playerName||(this.playerName=t.customerBlob.playerName)),t.customerBlob&&t.customerBlob.playerInfo&&!this.playerName&&(this.playerName=t.customerBlob.playerInfo.username),["".concat(e,"_").concat(n),t]}},{key:"pushToSlack",value:function(){var e=p(regeneratorRuntime.mark(function e(t,n,a){var r,i,o,l,h,p,f,d,g,m,v,b,w,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("[Debug] pushToSlack",t,n,a),r=c.a[a],"test"!==t){e.next=4;break}return e.abrupt("return");case 4:return i={appTag:u.app.client.appTag,state:n},e.prev=5,e.next=8,fetch("https://ecast.jackboxgames.com/api/v2/controller/state",{method:"POST",body:JSON.stringify(i)});case 8:return o=e.sent,e.next=11,o.json();case 11:if((l=e.sent).body&&l.body.url){e.next=15;break}return console.warn(l),e.abrupt("return");case 15:if(h=l.body.url,p="https://jackbox.tv/#json/".concat(h),f="https://qa.jackbox.tv/#json/".concat(h),d="https://test.jackbox.tv/#json/".concat(h),g="http://localhost:9090/#json/".concat(h),!r){e.next=34;break}if(m=r.url,v=r.channel,[{type:"button",text:"Open",url:h}],!n.states){e.next=34;break}return b={channels:v,unfurl_links:!1,attachments:[{title:t,actions:[{type:"button",text:"jackbox.tv",url:p},{type:"button",text:"qa.jackbox.tv",url:f},{type:"button",text:"test.jackbox.tv",url:d},{type:"button",text:"localhost",url:g}],title_link:h,fallback:"View at ".concat(h)}]},e.next=29,fetch(m,{method:"POST",body:JSON.stringify(b)});case 29:return w=e.sent,e.next=32,w.text();case 32:y=e.sent,console.log("[Debug] Slack success",y);case 34:s.a.show("alert",{input:"textarea",title:"Done!",inputValue:f}),e.next=40;break;case 37:e.prev=37,e.t0=e.catch(5),console.error("[Debug] Server error",e.t0);case 40:case"end":return e.stop()}},e,null,[[5,37]])}));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}()},413:function(e,t,n){},426:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(28),r=n.n(a),i=n(160);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,null,[{key:"isTestArtifact",value:function(e){return e&&e.rootId&&-1!==e.rootId.indexOf("test")}},{key:"save",value:function(e){var t=this.isTestArtifact(e)?this.testDomain:this.domain,n="http://".concat(t,"/artifact/").concat(e.categoryId,"/").concat(e.artifactId,"/");if(i.app.storage.isSupported){var a=i.app.storage.get("galleries"),o=[];try{o=JSON.parse(a)||[]}catch(e){o=[]}if(void 0===r.a.findWhere(o,{url:n}))return o.unshift({url:n,time:(new Date).getTime(),categoryId:e.categoryId}),i.app.storage.set("galleries",JSON.stringify(o.slice(0,40))),i.app.analytics.trackEvent("PostGame","galleryShown",i.app.client.appId),!0}return!1}}]),e}();s(c,"domain","games.jackbox.tv"),s(c,"testDomain","games-test.jackbox.tv")},434:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return r});var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"topNode",void 0),this.topNode=t}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(e,[{key:"reset",value:function(e){this.nodeStack=[this.topNode],this.resetNode(this.topNode),this.topNode.e.show()}},{key:"resetNode",value:function(e){var t=this;e.e.hide(),e.branches&&e.branches.forEach(function(e){return t.resetNode(e.node)})}},{key:"input",value:function(e){var t=this;if("back"===e){if(this.nodeStack.length<=1)return;return this.nodeStack.pop().e.hide(),void this.nodeStack[this.nodeStack.length-1].e.show()}var n=this.nodeStack[this.nodeStack.length-1];n.branches&&n.branches.forEach(function(n){if(n.input===e){t.nodeStack[t.nodeStack.length-1].e.hide();var a=n.node;a.e.show(),t.nodeStack.push(a)}})}}]),e}()}}]);