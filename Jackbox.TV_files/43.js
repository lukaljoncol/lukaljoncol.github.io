(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{406:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(408),o=n.n(a);n(415);function i(e,t,n,a,o,i,r){try{var s=e[i](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function s(e){i(r,a,o,s,l,"next",e)}function l(e){i(r,a,o,s,l,"throw",e)}s(void 0)})}}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(e,null,[{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.a.isVisible()&&o.a.close(),e instanceof Error&&(t.message=e.message,e="error");var n=this.parseDataToOptions(t);switch(e){case"alert":return this.showAlert(t);case"custom":return this.showCustom(t);case"error":return this.showError(n);default:console.warn("Unknown alert type",e)}return!1}},{key:"close",value:function(){o.a.close()}},{key:"vibrate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[100,100];window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(e)}},{key:"parseDataToOptions",value:function(e){var t=e;return e.message&&(t.text=e.message),e.restart&&(t.onClose=function(){return window.location.reload(!0)}),t}},{key:"showAlert",value:function(){var e=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.customClass="jbgModal",t.title=t.title||"Error",e.abrupt("return",o.a.fire(t));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"showError",value:function(){var e=r(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(185).then(n.t.bind(null,417,7));case 2:return a=e.sent,t.customClass="jbgModal",t.title=t.title||"Error",t.imageUrl=a.default,e.abrupt("return",o.a.fire(t));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"showCustom",value:function(){var e=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.fire(t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"DismissReason",get:function(){return o.a.DismissReason}}]),e}()},625:function(e,t,n){e.exports='<div id="page-signin" class="page white">\n    <header class="jbg-navbar">\n        <div class="container">\n            <div class="jbg-menu-button"></div>\n            <img alt="jackbox.tv" class="jbg-top-logo img-responsive" src='+n(626)+' />\n        </div>\n    </header>\n\n    <nav class=\'jbg-menu-container\'>\n        <ul class="drawer-menu">\n            <li>\n                <a class="twitch-connect" href="#">\n                    <i class="fa fa-twitch fa-lg"></i><%=STRING_MENU_TWITCH%>\n                </a>\n            </li>\n            <li>\n                <a class="twitch-logout" style="display:none" href="#">\n                    <i class="fa fa-twitch fa-lg"></i><%=STRING_MENU_LOGOUT%>\n                </a>\n            </li>\n            <li>\n                <a data-link=\'help\' class="button-help external-link" href="#" aria-label="help" role="button"><%=STRING_MENU_HELP%></a>\n            </li>\n            <li>\n                <a data-link=\'merch\' class="external-link button-merch" href="#"><%=STRING_MENU_MERCH%></a>\n            </li>\n            <li>\n                <a class="button-past-games" href="#"><%=STRING_MENU_PAST_GAMES%></a>\n            </li>\n            <li>\n                <a data-link=\'mailinglist\' class="external-link button-mailing-list" href="#"><%=STRING_MENU_MAILING_LIST%></a>\n            </li>\n            <li>\n                <a aria-label="facebook" data-link=\'facebook\' class="external-link social-button social-facebook button-merch"\n                    href="#"></a>\n                <a aria-label="twitter" data-link=\'twitter\' class="external-link social-button social-twitter button-merch"\n                    href="#"></a>\n                <a aria-label="instagram" data-link=\'instagram\' class="external-link social-button social-instagram button-merch"\n                    href="#"></a>\n            </li>\n            <li class="version">\n                <span class="drawer-menu-version"></span>\n            </li>\n        </ul>\n    </nav>\n\n    <div class=\'jbg-past-games\'>\n        <div id=\'galleries-region\'></div>\n    </div>\n\n    <div class="signin-container">\n        <div id="jbg_form_container" role="main">\n            <form id="jbg_form" class="" autocomplete="off">\n                <fieldset class="signin-fieldset">\n                    <div class="form-group RoomCode">\n                        <label for="roomcode" class="text-signin">\n                            <%=STRING_ROOMCODE%>\n                        </label>\n                        <input name="roomcode" id="roomcode" class="form-control jbg-input" type="text" tabindex="0"\n                            placeholder="<%=STRING_ROOMCODE_PLACEHOLDER%>" style="text-transform:uppercase;" maxlength="4"\n                            value="" autocapitalize="off" autocorrect="off" autocomplete="off">\n                        <div id="cameraWarning" class="signinWarning cameraWarning" style="display:none;">\n                            <%=STRING_CAMERA_WARNING%>\n                        </div>\n                        <div id="styleWarning" class="signinWarning styleWarning" style="display:none;">\n                            <%=STRING_STYLE_WARNING%>\n                        </div>\n                    </div>\n                    <div class="form-group Name">\n                        <label for="username" class="text-signin">\n                            <%=STRING_NAME%><span class="name-char-remaining pull-right">12</span></label>\n                        <input name="name" id="username" class="form-control jbg-input" type="text" placeholder="<%=STRING_NAME_PLACEHOLDER%>"\n                            style="text-transform:uppercase;" maxlength="12" value="" autocapitalize="off" autocorrect="off"\n                            autocomplete="off">\n                    </div>\n                    <div class="col-xs-12 text-center">\n                        <button type="submit" id="button-join" class="button-signin button-blue">\n                            <div class="play-text">\n                                <%=STRING_PLAY%>\n                            </div>\n                            <div class="lds-ring">\n                                <div></div>\n                                <div></div>\n                                <div></div>\n                                <div></div>\n                            </div>\n                        </button>\n\n                    </div>\n                    <input id="password" name="password" type="hidden">\n                </fieldset>\n            </form>\n        </div>\n\n        <div id="tos-warning" class="tosText small text-center" role="complementary">\n            <%=STRING_TOS_WARNING%>\n        </div>\n\n        <div class="glide">\n            <div id="banners-region" class="banners" data-glide-el="track" class="glide__track"></div>\n            <div id="bullets-region"></div>\n        </div>\n\n        <div class="jbg-bottom-logo-div">\n            <img alt="Jackbox Games Logo" class="jbg-bottom-logo" src='+n(627)+" />\n        </div>\n    </div>\n\n    <canvas class=\"canvas-compatibility\" width='1' height='1' style='background-color:white;' role=\"complementary\">\n        <%=STRING_CANVAS_COMPATIBILITY%>\n    </canvas>\n    \n    <script>\n        var modernBrowser = 'fetch' in window && 'assign' in Object\n        if (!modernBrowser) {\n            var scriptElement2 = document.createElement('script')\n            scriptElement2.async = false\n            scriptElement2.src = 'https://data.jsdelivr.com/v1/package/npm/whatwg-fetch/badges'\n            document.head.appendChild(scriptElement2)\n        }\n    <\/script>\n</div>"},626:function(e,t,n){e.exports=n.p+"images/305a6bead23c9339b6e18d1a1bb83360.svg"},627:function(e,t,n){e.exports=n.p+"images/c529041c741e5f7727f063bc49f74e00.svg"},789:function(e,t,n){"use strict";n.r(t);var a=n(12),o=n.n(a),i=n(28),r=n.n(i),s=n(34),l=n.n(s),c=n(31),u=n.n(c),d=n(624),m=n(160),g=n(113),p=n(406),E=n(156),h=n.n(E),R=n(18);function b(e,t,n,a,o,i,r){try{var s=e[i](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,o=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){o=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"user",null),m.storage.isSupported?"#access_token"===document.location.hash.substr(0,13)&&this.processRedirect(document.location.hash):console.warn("Twitch Login requires local storage")}return function(e,t,n){t&&v(e.prototype,t),n&&v(e,n)}(e,[{key:"prepare",value:function(){return console.log("[Twitch] prepare"),m.storage.get("token")?this.fetchUser():{}}},{key:"login",value:function(e){console.log("[Twitch] login",e),e=e||{};var t=h()();m.storage.set("state",t);var n=R.a.twitchClientID,a=e.redirect_uri||"https://"+window.location.hostname;console.log("redirect_uri",a);var o="https://id.twitch.tv/oauth2/authorize";o+="?client_id=".concat(n),o+="&redirect_uri=".concat(a),o+="&response_type=token",o+="&scope=user:read:email",o+="&state=".concat(t),window.location=o}},{key:"logout",value:function(){console.log("[Twitch] logout"),this.user=null,m.storage.remove("token")}},{key:"processRedirect",value:function(e){console.log("[Twitch] processRedirect",e);var t=m.storage.get("state");t||p.a.show(new Error("Twitch - Could not find the expected state"));for(var n=e.substr(1).split("&"),a={},o=0;o<n.length;o++){var i=N(n[o].split("="),2),r=i[0],s=i[1];a[r]=s}a.state!==t&&p.a.show(new Error("Twitch - State parameter doesn't match the expected state")),m.storage.set("token",a.access_token),m.storage.remove("state"),window.history.replaceState({},document.title,"/")}},{key:"fetchUser",value:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function r(e){b(i,a,o,r,s,"next",e)}function s(e){b(i,a,o,r,s,"throw",e)}r(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.storage.get("token"),e.next=3,fetch("https://api.twitch.tv/helix/users",{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,o=a.data[0],this.user=o,e.abrupt("return",this.user);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),f=n(53),w={en:{LANGUAGE_NAME:"English",SUPPORTED_LANGUAGES:["English","Français","Italiano","Deutsch","Español"],SUPPORTED_LOCALES:["en","fr","it","de","es"],LANGUAGE:"Language",LOGIN:"Login",STRING_ROOMCODE:"ROOM CODE",STRING_ROOMCODE_PLACEHOLDER:"ENTER 4-LETTER CODE",STRING_CAMERA_WARNING:"<strong>HEADS UP:</strong> We’re not detecting a camera, but you can still play the game without a photo. If this seems wrong, try joining with a different browser.",STRING_STYLE_WARNING:"<strong>HEADS UP:</strong> Your browser seems a bit outdated, and will have some issues displaying this game.",STRING_NAME:"NAME",STRING_NAME_PLACEHOLDER:"ENTER YOUR NAME",STRING_PLAY:"PLAY",STRING_TOS_WARNING:"By clicking PLAY, you agree to our <a class='tosLink' href='https://jackboxgames.com/terms-of-service/' target='_blank'>Terms of Service</a>",STRING_CANVAS_COMPATIBILITY:"Sorry, your browser is not supported.",STRING_MENU_HELP:"HELP",STRING_MENU_TWITCH:" TWITCH",STRING_MENU_LOGOUT:" LOGOUT",STRING_MENU_MERCH:"MERCH",STRING_MENU_PAST_GAMES:"PAST GAMES",STRING_MENU_MAILING_LIST:"MAILING LIST",ERROR_UNSUPPORTED_BROWSER:"This game is not supported on this browser.  View '?' or HELP to see a list of compatible browsers.",ERROR_UNSUPPORTED_WEBSOCKETS:"WebSockets are not supported on your browser.",ERROR_ROOM_FULL:"The room is full",ERROR_INVALID_ROOMCODE:"Invalid Room Code",ERROR_UNABLE_TO_CONNECT:"Unable to connect to the Jackbox Games server. This is commonly caused by adblockers or privacy extensions.",ERROR_GAME_LOCKED:"Game is in progress. Please wait for a new game to start.",AD_AVAILABLE_NOW:"Available Now!",AD_ON_SALE:"On Sale!"},fr:{LANGUAGE_NAME:"Français",SUPPORTED_LANGUAGES:["English","Français","Italiano","Deutsch","Español"],SUPPORTED_LOCALES:["en","fr","it","de","es"],LANGUAGE:"Langue",LOGIN:"Connexion",STRING_ROOMCODE:"CODE DE SALLE",STRING_ROOMCODE_PLACEHOLDER:"TAPEZ CODE 4 LETTRES",STRING_CAMERA_WARNING:"<strong>ATTENTION :</strong> nous ne détectons aucune caméra, mais vous pouvez jouer sans afficher votre photo. Si vous pensez qu'il s'agit d'une erreur, essayez de rejoindre en utilisant un autre navigateur.",STRING_STYLE_WARNING:"<strong>ATTENTION :</strong> votre navigateur semble être obsolète. Vous risquez de rencontrer des problèmes d'affichage avec ce jeu.",STRING_NAME:"NOM",STRING_NAME_PLACEHOLDER:"INDIQUEZ VOTRE NOM",STRING_PLAY:"JOUER",STRING_TOS_WARNING:"En cliquant sur JOUER, vous acceptez nos <a class='tosLink' href='https://jackboxgames.com/terms-of-service/' target='_blank'>Conditions de service</a>.",STRING_CANVAS_COMPATIBILITY:"Désolé, votre navigateur n'est pas compatible.",STRING_MENU_HELP:"AIDE",STRING_MENU_TWITCH:" TWITCH",STRING_MENU_LOGOUT:" DÉCONNEXION",STRING_MENU_MERCH:"MERCH",STRING_MENU_PAST_GAMES:"ANCIENS JEU",STRING_MENU_MAILING_LIST:"LISTE DE DIFFUSION",ERROR_UNSUPPORTED_BROWSER:"Ce jeu n'est pas compatible avec votre navigateur. Allez sur '?' ou sur AIDE pour afficher une liste des navigateurs compatibles.",ERROR_UNSUPPORTED_WEBSOCKETS:"Votre navigateur n'est pas compatible avec les WebSockets.",ERROR_ROOM_FULL:"La salle est pleine",ERROR_INVALID_ROOMCODE:"Code de salle incorrect",ERROR_UNABLE_TO_CONNECT:"Impossible de se connecter au serveur Jackbox Games. Les bloqueurs de publicité ou les modules de protection de la confidentialité sont généralement à l'origine de ce problème.",ERROR_GAME_LOCKED:"Partie déjà en cours. Attendez qu'une nouvelle partie commence.",AD_AVAILABLE_NOW:"Disponible !",AD_ON_SALE:"En promotion !"},it:{LANGUAGE_NAME:"Italiano",SUPPORTED_LANGUAGES:["English","Français","Italiano","Deutsch","Español"],SUPPORTED_LOCALES:["en","fr","it","de","es"],LANGUAGE:"Lingua",LOGIN:"Accesso",STRING_ROOMCODE:"CODICE STANZA",STRING_ROOMCODE_PLACEHOLDER:"INSERISCI IL CODICE DI 4 LETTERE",STRING_CAMERA_WARNING:"<strong>AVVISO:</strong> Non rileviamo la telecamera, ma puoi giocare anche senza aggiungere una foto. Se la cosa non ti torna, prova ad accedere usando un altro browser.",STRING_STYLE_WARNING:"<strong>AVVISO:</strong> Il tuo browser è obsoleto e avrà dei problemi a visualizzare il gioco.",STRING_NAME:"NOME",STRING_NAME_PLACEHOLDER:"INSERISCI IL TUO NOME",STRING_PLAY:"GIOCA",STRING_TOS_WARNING:"Selezionando GIOCA, accetti le <a class='tosLink' href='https://jackboxgames.com/terms-of-service/' target='_blank'>Condizioni del servizio</a>",STRING_CANVAS_COMPATIBILITY:"Siamo spiacenti, il tuo browser non è supportato.",STRING_MENU_HELP:"AIUTO",STRING_MENU_TWITCH:" TWITCH",STRING_MENU_LOGOUT:" LOGOUT",STRING_MENU_MERCH:"NEGOZIO",STRING_MENU_PAST_GAMES:"PARTITE PRECEDENTI",STRING_MENU_MAILING_LIST:"NEWSLETTER",ERROR_UNSUPPORTED_BROWSER:"Il gioco non è supportato dal browser attualmente in uso. Clicca su '?' o AIUTO per la lista dei browser compatibili.",ERROR_UNSUPPORTED_WEBSOCKETS:"La tecnologia WebSocket non è supportata dal browser attualmente in uso.",ERROR_ROOM_FULL:"La stanza è piena",ERROR_INVALID_ROOMCODE:"Codice stanza non valido",ERROR_UNABLE_TO_CONNECT:"Impossibile collegarsi al server Jackbox Games. Solitamente il problema è causato da adblocker o estensioni per la privacy.",ERROR_GAME_LOCKED:"Partita in corso. Attendi che ne inizi una nuova.",AD_AVAILABLE_NOW:"Disponibile ora!",AD_ON_SALE:"In offerta!"},de:{LANGUAGE_NAME:"Deutsche",SUPPORTED_LANGUAGES:["English","Français","Italiano","Deutsch","Español"],SUPPORTED_LOCALES:["en","fr","it","de","es"],LANGUAGE:"Sprache",LOGIN:"Login",STRING_ROOMCODE:"RAUMCODE",STRING_ROOMCODE_PLACEHOLDER:"GIB DEN 4-STELLIGEN CODE EIN",STRING_CAMERA_WARNING:"<strong>ACHTUNG:</strong> Es wurde keine Kamera erkannt, aber du kannst das Spiel auch ohne Foto spielen. Falls eine Kamera vorhanden ist, probiere es mit einem anderen Browser.",STRING_STYLE_WARNING:"<strong>ACHTUNG:</strong> Dein Browser scheint etwas veraltet zu sein. Es könnte Probleme bei der Anzeige dieses Spiels geben.",STRING_NAME:"NAME",STRING_NAME_PLACEHOLDER:"GIB DEINEN NAMEN EIN",STRING_PLAY:"SPIELEN",STRING_TOS_WARNING:"Wenn du auf SPIELEN klickst, erklärst du dich mit unseren <a class='tosLink' href='https://jackboxgames.com/terms-of-service/' target='_blank'>Nutzungsbedingungen</a> einverstanden.",STRING_CANVAS_COMPATIBILITY:"Tut uns leid, dein Browser wird nicht unterstützt.",STRING_MENU_HELP:"HILFE",STRING_MENU_TWITCH:" TWITCH",STRING_MENU_LOGOUT:" AUSLOGGEN",STRING_MENU_MERCH:"MERCH",STRING_MENU_PAST_GAMES:"ANDERE SPIELE",STRING_MENU_MAILING_LIST:"MAILINGLISTE",ERROR_UNSUPPORTED_BROWSER:"Dieses Spiel wird von diesem Browser nicht unterstützt.Unter '?' und HILFE findest du eine vollständige Liste an kompatiblen Browsern.",ERROR_UNSUPPORTED_WEBSOCKETS:"WebSockets werden auf deinem Browser nicht unterstützt.",ERROR_ROOM_FULL:"Das Raum ist voll.",ERROR_INVALID_ROOMCODE:"Ungültiger Raumcode",ERROR_UNABLE_TO_CONNECT:"Es konnte keine Verbindung zum Server von Jackbox Games hergestellt werden. Dies wird häufig durch Adblocker oder Privacy Extensions verursacht.",ERROR_GAME_LOCKED:"Spiel läuft derzeit. Bitte warte, bis ein neues Spiel beginnt.",AD_AVAILABLE_NOW:"Jetzt verfügbar!",AD_ON_SALE:"Angebot!"},es:{LANGUAGE_NAME:"Español",SUPPORTED_LANGUAGES:["English","Français","Italiano","Deutsch","Español"],SUPPORTED_LOCALES:["en","fr","it","de","es"],LANGUAGE:"idioma",LOGIN:"Iniciar sesión",STRING_ROOMCODE:"CÓDIGO DE LA SALA",STRING_ROOMCODE_PLACEHOLDER:"INTRODUCE CÓDIGO DE 4 CARACTERES",STRING_CAMERA_WARNING:"<strong>AVISO:</strong> No se detecta ninguna cámara, pero puedes jugar sin hacerte una foto. Si crees que se trata de un error, cambia de navegador.",STRING_STYLE_WARNING:"<strong>AVISO:</strong> Tu navegador está un poco desactualizado, así que es posible que el juego no se vea del todo bien.",STRING_NAME:"NOMBRE",STRING_NAME_PLACEHOLDER:"INDICA TU NOMBRE",STRING_PLAY:"JUGAR",STRING_TOS_WARNING:"Al hacer clic en JUGAR, aceptas las <a class='tosLink' href='https://jackboxgames.com/terms-of-service/' target='_blank'>Condiciones del servicio</a>",STRING_CANVAS_COMPATIBILITY:"Vaya, tu navegador no es compatible.",STRING_MENU_HELP:"AYUDA",STRING_MENU_TWITCH:" TWITCH",STRING_MENU_LOGOUT:" CERRAR SESIÓN",STRING_MENU_MERCH:"MERCHANDISING",STRING_MENU_PAST_GAMES:"PARTIDAS ANTERIORES",STRING_MENU_MAILING_LIST:"LISTA DE CORREO",ERROR_UNSUPPORTED_BROWSER:"El juego no es compatible con este navegador.En '?' y AYUDA puedes ver la lista de navegadores compatibles.",ERROR_UNSUPPORTED_WEBSOCKETS:"Tu navegador no admite WebSockets.",ERROR_ROOM_FULL:"La sala está llena",ERROR_INVALID_ROOMCODE:"El código de la sala no es válido",ERROR_UNABLE_TO_CONNECT:"No podemos conectarte a los servidores de Jackbox Games. Puede ser debido a los bloqueadores de anuncios y las extensiones de privacidad.",ERROR_GAME_LOCKED:"Esta partida está en curso. Espera a que comience otra.",AD_AVAILABLE_NOW:"¡Ya disponible!",AD_ON_SALE:"¡Ya a la venta!"}},T=n(625),S=n.n(T);n(628);function O(e,t,n,a,o,i,r){try{var s=e[i](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function I(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function r(e){O(i,a,o,r,s,"next",e)}function s(e){O(i,a,o,r,s,"throw",e)}r(void 0)})}}n.d(t,"SignInView",function(){return G});var A=[{text:"Now Available!",src:"https://s3.amazonaws.com/static.jackboxgames.com/banners/JPP6ControllerAd.png",href:"https://jackboxgames.com/party-pack-six/?utm_source=jackboxtv&utm_campaign=jbgtvpp6&utm_content=jbgtvpp6"}],C={autoplay:!1,hoverpause:!0,keyboard:!1,type:"carousel",perView:1,gap:15,peek:50},G=u.a.View.extend({appName:"Main",appId:"main",className:"Signin",template:r.a.template(S.a),twitch:new _,model:new l.a.Model({roomCode:"",name:"",password:"",isTwitchAuthenticated:!1,usesStorage:!1,customNamespace:"",version:"3.0.4",isMenuVisible:!1,isPastGamesVisible:!1,connecting:!1}),roomCodeLength:4,maxNameLength:12,glide:null,galleryCollectionView:null,bannerCollectionView:null,bannerBulletCollectionView:null,links:{help:"http://help.jackboxgames.com",tos:"http://jackboxgames.com/terms-of-service/",blog:"http://jackboxgames.com/?utm_source=jackboxtv&utm_medium=logo&utm_campaign=jackboxgames",merch:"https://shop.jackboxgames.com/",mailinglist:"https://jackboxgames.us7.list-manage.com/subscribe?u=a181fa3b606c035e1cee11b76&id=eb7f0081d6",facebook:"https://www.facebook.com/JackboxGames/",twitter:"https://twitter.com/jackboxgames",instagram:"https://www.instagram.com/playjackboxgames"},regions:{galleries:"#galleries-region",banners:"#banners-region",bannerBullets:"#bullets-region"},events:{"click #button-join":"onJoinClick","click .button-tos":"onTOSClick","click .jbg-bottom-logo-div":"onBlogClick","click #jbg_logo":"onLinkClick","click .external-link":"onLinkClick","click .twitch-connect":"onTwitchConnectClick","click .twitch-logout":"onTwitchLogoutClick","click .jbg-navbar":"onHamburgerClick","click .button-past-games":"showPastGames"},bindings:{"#roomcode":{observe:"roomCode",onSet:function(e){return this.updateRoomStatus(e),e}},"#username":{observe:"name",attributes:[{name:"disabled",observe:"isTwitchAuthenticated"},{name:"value",observe:"name"}]},"#password":{attributes:[{name:"value",observe:"password"}]},".drawer-menu-version":{observe:"version",onGet:function(e){return"v".concat(e)}},".jbg-menu-button":{classes:{active:{observe:["isMenuVisible","isPastGamesVisible"],onGet:function(e){return e[0]||e[1]}}}},".jbg-menu-container":{classes:{active:"isMenuVisible"}},".jbg-past-games":{classes:{active:"isPastGamesVisible"}},".name-char-remaining":{observe:"name",onGet:function(e){return this.maxNameLength-e.length}},".button-signin":{attributes:[{name:"disabled",observe:["roomCode","name"],onGet:function(){return!this.canSubmit()}}],classes:{ready:{observe:["roomCode","name"],onGet:function(){return this.canSubmit()}}}},".lds-ring":{observe:"connecting",visible:!0},".twitch-logout":{observe:"isTwitchAuthenticated",visible:!0},".twitch-connect":{observe:"isTwitchAuthenticated",visible:function(e){return!e}},".signin-fieldset":{attributes:[{name:"disabled",observe:"connecting",onGet:function(e){return e}}]},".play-text":{observe:"connecting",visible:function(e){return!e}},".cameraWarning":{observe:"usesCamera",visible:function(e){var t=!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia);return e&&!t},visibleFn:function(e,t){t?e.slideDown("fast"):e.slideUp("fast")}},".styleWarning":{observe:"usesFlexbox",visible:function(e){var t=!1;try{t=CSS.supports("flex-wrap","wrap")}catch(e){t=!1}return e&&!t},visibleFn:function(e,t){t?e.slideDown("fast"):e.slideUp("fast")}}},initialize:function(){var e=this;return I(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.galleryCollectionView=new k,e.bannerCollectionView=new U,e.bannerBulletCollectionView=new P,e.render(),e.initStorage(),m.app.client.on("client:didJoinRoom",e.onDidJoinRoom.bind(e)),m.app.client.on("client:joinRoomDidFail",e.onJoinRoomFail.bind(e)),m.app.client.on("client:roomCodeIsInvalid",e.onInvalidRoomCode.bind(e)),m.app.client.on("client:connectError",e.onConnectError.bind(e)),m.app.client.on("client:roomFull",e.onRoomFull.bind(e)),m.app.analytics.setApplication(e.appName,e.appId,"3.0.4"),m.app.analytics.trackScreenView("".concat(e.appId,".login")),t.next=14,e.twitch.prepare();case 14:e.twitch.user&&e.setupTwitchUser();case 15:case"end":return t.stop()}},t)}))()},render:function(){if(this.locale=this.getOption("locale"),m.app.storage.isSupported){var e=m.app.storage.get("galleries");if(e){var t=[];try{t=JSON.parse(e)}catch(e){console.warn("Unable to parse galleries array")}t=t.map(function(e){e.gameName=e.categoryId,e.categoryId||(-1!==e.url.indexOf("Quiplash2")?e.gameName="Quiplash2Game":-1!==e.url.indexOf("Drawful")?e.gameName="DrawfulGame":-1!==e.url.indexOf("TeeKO")?e.gameName="TeeKOGame":-1!==e.url.indexOf("TriviaDeath")&&(e.gameName="TriviaDeathResults"));var t=new Date(e.time);return e.date=t.toLocaleDateString(),e}),this.galleryCollectionView.collection.set(t)}f.a.hasHashRoomCode&&(this.model.set({roomCode:f.a.hashRoomCode}),m.app.storage.set("roomCode",this.model.get("roomCode")))}this.locale||(this.locale=this.findValidLanguage()),w[this.locale]||(this.locale="en"),this.$el.html(this.template(w[this.locale])),this.model.get("usesStorage")&&m.app.storage.setTag("locale-".concat(this.locale))},findValidLanguage:function(){var e="en",t=Object.keys(w),n=navigator.languages;return r.a.some(n,function(n){return r.a.some(t,function(t){return 0===n.indexOf(t)&&(e=t,!0)})}),e},onBeforeDestroy:function(){console.log("[SignIn] onBeforeDestroy"),this.glide&&this.glide.destroy()},onAttach:function(){this.stickit(),this.showChildView("galleries",this.galleryCollectionView);try{var e=o()(".canvas-compatibility")[0].toDataURL("image/png");"data:,"===(e=e.replace("data:image/png;base64,",""))&&p.a.show(new Error(w[this.locale].ERROR_UNSUPPORTED_BROWSER))}catch(e){p.a.show(new Error(w[this.locale].ERROR_UNSUPPORTED_BROWSER))}if(window.performance&&window.performance.timing){var t=Math.round((new Date).getTime()-window.performance.timing.navigationStart);m.app.analytics.trackTiming("send","timing","Signin Page",t)}this.initBanners(),f.a.queryParam("error")&&(p.a.showError({title:f.a.queryParam("error"),text:f.a.queryParam("error_description")}),window.history.replaceState({},document.title,"/"))},initStorage:function(){m.app.storage.isSupported&&this.model.set({customNamespace:m.app.storage.namespace,usesStorage:!0,roomCode:m.app.storage.get("roomCode")||"",name:m.app.storage.get("name")||"",password:m.app.storage.get("password")||"",galleries:m.app.storage.get("galleries")})},initBanners:function(){var e=this;return I(regeneratorRuntime.mark(function t(){var n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://s3.amazonaws.com/static.jackboxgames.com/banners.json");case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,o=(o=a&&a.bannerAds&&a.bannerAds.length?a.bannerAds:A).map(function(t,n){if(t.index=n,e.model.get("usesStorage")&&void 0!==t.tags){var a=m.app.storage.get("tags")||[];(t.tags||[]).every(function(e){return a.includes(e)})||(t.hidden=!0)}var o=new Date;t.start&&(o<new Date(t.start)&&(t.hidden=!0));t.end&&(o>new Date(t.end)&&(t.hidden=!0));return t}).filter(function(e){return!e.hidden}),e.bannerCollectionView.collection.set(o),e.bannerBulletCollectionView.collection.set(o),e.showChildView("banners",e.bannerCollectionView),e.showChildView("bannerBullets",e.bannerBulletCollectionView),e.stickit(),e.glide=new d.a(".glide",C),e.bannersInTransition=0,e.glide.on(["move","build.before","mount.before","run.before"],function(){e.bannersInTransition+=1}),e.glide.on(["move.after","build.after","mount.after","run.after"],function(){e.bannersInTransition-=1}),e.glide.mount(),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),console.error("Unable to load banner data",t.t0);case 24:case"end":return t.stop()}},t,null,[[0,21]])}))()},onJoinClick:function(e){var t=this;return I(regeneratorRuntime.mark(function a(){var o,i,r,s,l;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&e.preventDefault(),g.a.isSupported||p.a.show(Error(w[t.locale].ERROR_UNSUPPORTED_WEBSOCKETS)),o=t.model.get("roomCode").toUpperCase(),i=t.model.get("password")||"",(r=t.sanitize(t.model.get("name").trim().toUpperCase())).length>t.maxNameLength&&(r="".concat(r.substr(0,t.maxNameLength-1),"…")),t.model.get("connecting")){a.next=19;break}if(!t.model.get("requiresPassword")||i){a.next=17;break}return a.next=10,n.e(186).then(n.t.bind(null,771,7));case 10:return s=a.sent,a.next=13,p.a.show("custom",{customClass:"jbgModal",title:"Password required",html:"Please enter the password or join as an audience member",input:"text",imageUrl:s.default,confirmButtonClass:"btn btn-success",confirmButtonText:"Join as Player",cancelButtonClass:"btn btn-danger",cancelButtonText:"Join as Audience",reverseButtons:!0,inputAttributes:{autocapitalize:"off"},showCancelButton:t.model.get("audienceEnabled")});case 13:void 0!==(l=a.sent).value?(t.model.set("connecting",!0),t.model.set("password",l.value),t.joinRoom(o,r,{password:l.value})):l.dismiss===p.a.DismissReason.cancel&&(t.model.set("connecting",!0),t.joinRoom(o,r,{forceJoinAs:"audience"})),a.next=19;break;case 17:t.model.set("connecting",!0),t.joinRoom(o,r,{password:i,twitch:t.twitch});case 19:return a.abrupt("return",!1);case 20:case"end":return a.stop()}},a)}))()},joinRoom:function(e,t,n){var a=this;this.glide&&this.glide.disable();var o=setInterval(function(){a.bannersInTransition||(clearInterval(o),m.app.client.connect(e,t,n))},20)},onDidJoinRoom:function(e,t){this.model.get("usesStorage")&&(m.app.storage.set("roomCode",this.model.get("roomCode")),m.app.storage.set("name",this.model.get("name")),m.app.storage.set("password",this.model.get("password"))),m.app.analytics.trackEvent("SignIn","roomJoined",t),this.model.get("isTwitchAuthenticated")&&m.app.analytics.trackEvent("SignIn","twitchUserRoomJoined",t),m.app.router.controller.navigateToApp(e,t)},onJoinRoomFail:function(e){-1!==e.message.search("invalid room password")?p.a.show(new Error("Incorrect password")):-1!==e.message.search("Room is full")?p.a.show(new Error(w[this.locale].ERROR_ROOM_FULL)):-1!==e.message.search("Room requires Twitch login")?p.a.show(new Error("Room requires Twitch login")):p.a.show(new Error("Error joining this room")),this.model.set("connecting",!1),this.glide&&this.glide.enable()},onInvalidRoomCode:function(){p.a.show(new Error(w[this.locale].ERROR_INVALID_ROOMCODE)),this.model.set("connecting",!1),this.glide.enable()},onConnectError:function(){p.a.show(new Error(w[this.locale].ERROR_UNABLE_TO_CONNECT)),this.model.set("connecting",!1),this.glide.enable()},onRoomFull:function(){p.a.show(new Error(w[this.locale].ERROR_ROOM_FULL)),this.model.set("connecting",!1),this.glide.enable()},onTOSClick:function(){window.open(this.links.tos,"_blank")},onBlogClick:function(){m.app.analytics.trackEvent("SignIn","linkClicked","blog"),window.open(this.links.blog,"_blank")},onLinkClick:function(e){var t=e.target.dataset.link,n=this.links[t];m.app.analytics.trackEvent("SignIn","linkClicked",t),window.open(n,"_blank")},onHamburgerClick:function(){this.model.get("isPastGamesVisible")||this.model.set({isMenuVisible:!this.model.get("isMenuVisible")}),this.model.set({isPastGamesVisible:!1})},showPastGames:function(e){this.model.set({isMenuVisible:!this.model.get("isMenuVisible")}),this.model.set({isPastGamesVisible:!0})},onTwitchConnectClick:function(e){e.preventDefault(),this.twitch.login()},onTwitchLogoutClick:function(e){e.preventDefault(),this.twitch.logout(),this.model.set({name:"",isTwitchAuthenticated:!1,isMenuVisible:!1})},setupTwitchUser:function(){var e=this.twitch.user.display_name;e.length>this.maxNameLength&&(e="".concat(e.substr(0,this.maxNameLength-1),"…")),this.model.set({name:e,isTwitchAuthenticated:!0}),f.a.hasHashRoomCode&&this.onJoinClick()},updateRoomStatus:function(e){var t=this;return I(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.length>=t.roomCodeLength)){n.next=16;break}return n.prev=1,n.next=4,m.app.client.getRoomStatusForCode(e);case 4:if(a=n.sent){n.next=8;break}return t.resetRoomStatus(),n.abrupt("return");case 8:t.model.set({requiresPassword:a.requiresPassword||!1,audienceEnabled:a.audienceEnabled||!1,usesCamera:R.a.gameFeatures[a.appid]&&R.a.gameFeatures[a.appid].includes("camera")}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.error(n.t0);case 14:n.next=17;break;case 16:t.resetRoomStatus();case 17:case"end":return n.stop()}},n,null,[[1,11]])}))()},resetRoomStatus:function(){m.app.storage.isSupported&&m.app.storage.remove("password"),this.model.unset("password"),this.model.set({requiresPassword:!1,audienceEnabled:!1,usesCamera:!1})},canSubmit:function(){var e=this.model.get("roomCode"),t=this.model.get("name");return e.length===this.roomCodeLength&&t.length},sanitize:function(e){return e.replace(/[^A-Z0-9\u00A1\u0020-\u002F\u00BF-\u00FF\u2026!?*$+\-'_ .,]/gi,"").replace(/'/g,"’").trim()}}),L=u.a.View.extend({tagName:"div",className:"pastGame",bindings:{":el":{observe:"gameName",visible:!0},".past-game-icon":{attributes:[{name:"class",observe:"gameName"}]},".gallery-menu-item":{attributes:[{name:"href",observe:"url"}]},".gameName":"gameName",".date":"date"},events:{"click .gallery-menu-item":"onClick"},template:r.a.template('\n        <a class="gallery-menu-item" target="_blank">\n            <div class="past-game-icon"></div>\n            <div class="past-game-text">\n                <span class="date"></span>\n            </div>\n        </a>'),onRender:function(){this.stickit()},onClick:function(){m.app.analytics.trackEvent("SignIn","galleryClicked",this.model.get("gameName"))}}),k=u.a.CollectionView.extend({collection:new l.a.Collection([]),className:"past-game-collection",childView:L,emptyView:u.a.View.extend({template:r.a.template('<p class="gallery-empty">No past games yet</p>')})}),D=u.a.View.extend({tagName:"li",className:"glide__slide",template:r.a.template('\n        <a class="banner-a" target="_blank" href="https://www.jackboxgames.com">\n            <div class="banner-container">\n                <img class="banner-img" src="https://via.placeholder.com/400x150">\n                <div class="banner-text"></div>\n            </div>\n        </a>'),bindings:{".banner-text":"text",".banner-a":{attributes:[{name:"href",observe:"href"}]},".banner-img":{attributes:[{name:"src",observe:"src"}]}},events:{click:"onClick"},onRender:function(){this.stickit()},onClick:function(){m.app.analytics.trackEvent("SignIn","bannerClicked",this.model.get("src"))}}),U=u.a.CollectionView.extend({tagName:"ul",collection:new l.a.Collection([]),className:"glide__slides",childView:D}),M=u.a.View.extend({tagName:"button",className:"glide__bullet",template:r.a.template(""),bindings:{":el":{attributes:[{name:"data-glide-dir",observe:"index",onGet:function(e){return"=".concat(e)}}]}},onRender:function(){this.stickit()}}),P=u.a.CollectionView.extend({tagName:"div",collection:new l.a.Collection([]),className:"glide__bullets",childView:M,attributes:{"data-glide-el":"controls[nav]"}})}}]);